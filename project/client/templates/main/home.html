{% extends "_base.html" %} {% import "bootstrap/wtf.html" as wtf %} {% block content %}


<div class="container">
    <div class="row">

        <div class="col-lg-5 col-xs-5">
            <h1>Welcome!</h1>
        </div>

    </div>

    <div class="row">
        <div class="col-lg col-xs">
            <h3>To get started enter the name of a subreddit you'd like to see</h3>
        </div>
    </div>

</div>

<div class="container">
    {% set action=url_for('main.results') %}
    {% set btn_label='Listen' %}
    {% include 'main/sub_search.html' %}
</div>




<script type="text/javascript">
    $(function() {
        function split(val) {
            return val.split(/,\s*/);
        }

        function extractLast(term) {
            return split(term).pop();
        }

        $("#search-field").autocomplete({
            source: function(request, response) {
                $.getJSON("{{url_for('main.autocomplete')}}", {
                    q: extractLast(request.term), // in flask, "q" will be the argument to look for using request.args
                }, function(data) {
                    var source_data = data.matching_results
                    response(data.matching_results); // matching_results from jsonify
                });
            },
            minLength: 2,
            select: function(event, ui) {
                console.log(ui.item.value); // not in your question, but might help later
                var terms = split(this.value);
                terms.pop();
                terms.push(ui.item.value);
                terms.push("");
                this.value = terms.join(", ");
                return false;
            }
        })
    })
</script>



{% endblock %}
