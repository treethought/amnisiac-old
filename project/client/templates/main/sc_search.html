
{# {% extends '_base.html' %}  #}{% import "bootstrap/wtf.html" as wtf %} {# {% block sub_search %} #}

{# {% block content %} #}
    

    <form class='form' role='form' method="post" action="{{url_for('main.results')}}">

        <div class="row">

            <div class="col">
                {{ sc_form.csrf_token }} {{ sc_form.hidden_tag() }} {{ wtf.form_errors(sc_form, hiddens='only') }} {{ wtf.form_field(sc_form.sc_search)}}
            </div>
        </div>

         <div class="row">
            <div class="col-lg-2">
                <button type="submit" class="btn btn-success">Search</button>
            </div>

        </div>

  

    
    </form>


<script type="text/javascript">
$(function() {
    
        function split(val) {
            return val.split(/,\s*/);
        }

        function extractLast(term) {
            return split(term).pop();
        }

        $("#search-field").autocomplete({
            source: function(request, response) {
                console.log(request.term)
                $.getJSON("{{url_for('sc.autocomplete')}}", {
                    q: extractLast(request.term), // in flask, "q" will be the argument to look for using request.args
                }, function(data) {
                    console.log(data.results);
                    var source_data = data.results;
                    response(data.results); // matching_results from jsonify
                });
            },
            minLength: 3,
            select: function(event, ui) {
                // console.log(ui.item.value); // not in your question, but might help later
                var terms = split(this.value);
                terms.pop();
                terms.push(ui.item.value);
                terms.push("");
                this.value = terms.join(", ");
                return false;
            }
        })

});
  



</script>

{# {% endblock %} #}

{#
<script type="text/javascript">
    $(document).ready(function() {
        $('#source-table').after('<div id="nav"></div>');
        var rowsShown = 20;
        var rowsTotal = $('#source-table tbody tr').length;
        var numPages = rowsTotal / rowsShown;
        for (i = 0; i < numPages; i++) {
            var pageNum = i + 1;
            $('#nav').append('<a href="#" rel="' + i + '">' + pageNum + '</a> ');
        }
        $('#source-table tbody tr').hide();
        $('#source-table tbody tr').slice(0, rowsShown).show();
        $('#nav a:first').addClass('active');
        $('#nav a').bind('click', function() {

            $('#nav a').removeClass('active');
            $(this).addClass('active');
            var currPage = $(this).attr('rel');
            var startItem = currPage * rowsShown;
            var endItem = startItem + rowsShown;
            $('#source-table tbody tr').css('opacity', '0.0').hide().slice(startItem, endItem).
            css('display', 'table-row').animate({
                opacity: 1
            }, 300);
        });
    });
</script> #}

