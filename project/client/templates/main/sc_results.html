{% extends "_base.html" %} {# {% block sub_search %} #} {% block content %} {# <iframe src="" id='soundcloud-player'></iframe> #}

<div class="container text-center" id='sc-feed'>
    <div class="row">
        <div class="col-xs" id="load-msg">
            <h2>Fetching tracks from</h2> {% for artist in queries %}
            <h3>{{artist}}</h3> {% endfor %}
        </div>

    <div class="row">
        <div class="col-xs">
            <img id="loader_img" src="{{url_for('static', filename='loader_img.gif')}}">
              
        </div>
    </div>  

    </div>
</div>

<script type="text/javascript">
    $(function() {

        var widget = function(iframeHtml) {
                        return "<div class='row'><div class='col-xs-5'>" + iframeHtml + "</div></div>"
                    };

        $.get("{{ url_for('sc.load_tracks') }}", {
                artists: "{{artists}}",
            }, function(data) {
                console.log('sent:')
                console.log(data);
                for (var i = data.length - 1; i >= 0; i--) {
                    
                    $('#sc-feed').append(widget(data[i]));
                }
                $('#loader_img').hide();
        });


    });
</script>

{#
<script src="{{url_for('static', filename='soundcloud.js')}}" type="text/javascript"></script> #} {% endblock content %}
